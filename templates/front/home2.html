{% extends "front/base.html" %}{% block content %} {% load static %}
<style>
  .sound{
    position: absolute;
    top: 30px;
    right: 30px;
    background-color: rgba(255, 255, 255, 0.5);
    padding: 15px;
    border-radius: 50%;
    z-index: 1;
    cursor: pointer;
  }
  .icon svg:last-child {
    display: none;
  }
  @media screen and (max-width:600px) {
    .sound{
      top: 5px;
      right: 10px;
      scale: .6;
    }
  }

</style>

<section class="main-cara">
  <div id="carouselExampleDark" class="carousel carousel-dark slide" data-bs-ride="carousel">
    <div class="carousel-indicators">
      <span type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="0" class="active"
        aria-current="true" aria-label="Slide 1"></span>
      <span type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="1" aria-label="Slide 2"></span>
      <span type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="2" aria-label="Slide 3"></span>
      <span type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="3" aria-label="Slide 4"></span>
      <span type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="4" aria-label="Slide 5"></span>
    </div>
    <div class="carousel-inner">
      <div class="carousel-item active" data-bs-interval="1200000"> 
        <video muted playsinline  autoplay controls data-name="1" loading='lazy'  poster="{% static "front/assets/thumbnail.webp" %}" preload="auto">
            <source src="{% static "front/assets/first.mp4" %}" > 
        </video>
        <!-- <div  class='embed_video'  style="padding:56.25% 0 0 0;position:relative;">
           <div id="908587113_thumb" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center;">
            
          </div> 
          
          <iframe src="https://player.vimeo.com/video/908587113?badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479&loop=1&autoplay=1&display=1&muted=1" frameborder="0" allow="autoplay;  picture-in-picture" style="position:absolute;top:0;left:0;width:100%;height:100%;" title="TropoliteCookNWhip"></iframe></div> -->
        <div class="create-text carousel-caption d-none d-md-block">
          <a href="/bakery/bakery-whips/cook-n-whip" class="cta">
            <span>Start exploring</span>
            <svg width="13px" height="10px" viewBox="0 0 13 10">
              <path d="M1,5 L11,5"></path>
              <polyline points="8 1 12 5 8 9"></polyline>
            </svg>
          </a>
        </div>
      </div>
      <div class="carousel-item"  data-bs-interval="1111110">
        {% comment %} <div  class='embed_video'  style="padding:56.25% 0 0 0;position:relative;"><iframe src="https://player.vimeo.com/video/908587163?badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479&loop=1&display=1&muted=1" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" style="position:absolute;top:0;left:0;width:100%;height:100%;" title="TropoliteCookNWhip"></iframe></div> {% endcomment %}
        <video muted playsinline  controls data-name="2">
            <source src="{% static "front/assets/TropoliteSvenson.mp4" %}" > 
        </video>
        <div class="create-text carousel-caption d-none d-md-block">
          <a href="/bakery/bakery-whips/svensons" class="cta">
            <span>Start exploring</span>
            <svg width="13px" height="10px" viewBox="0 0 13 10">
              <path d="M1,5 L11,5"></path>
              <polyline points="8 1 12 5 8 9"></polyline>
            </svg>
          </a>
        </div>       
      </div>
      <div class="carousel-item" data-bs-interval="1111110">
        <video muted playsinline  controls data-name="3">
            <source src="{% static "front/assets/ZeroMaidaRange.mp4" %}" > 
        </video>
        {% comment %} <div  class='embed_video'  style="padding:56.25% 0 0 0;position:relative;"><iframe src="https://player.vimeo.com/video/900034742?badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479&loop=1&display=1&muted=1" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" style="position:absolute;top:0;left:0;width:100%;height:100%;" title="TropoliteCookNWhip"></iframe></div> {% endcomment %}
        <div class="create-text carousel-caption d-none d-md-block">
          <a href="/bakery/bakery-premixes/zero-maida-cake-mixes" class="cta">
            <span>Start exploring</span>
            <svg width="13px" height="10px" viewBox="0 0 13 10">
              <path d="M1,5 L11,5"></path>
              <polyline points="8 1 12 5 8 9"></polyline>
            </svg>
          </a>
        </div>
      </div>
      <div class="carousel-item"  data-bs-interval="1111110">
        {% comment %} <div  class='embed_video'  style="padding:56.25% 0 0 0;position:relative;"><iframe src="https://player.vimeo.com/video/902949189?badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479&loop=1&display=1&muted=1" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" style="position:absolute;top:0;left:0;width:100%;height:100%;" title="TropoliteCookNWhip"></iframe></div> {% endcomment %}
        <video muted playsinline controls data-name="4">
            <source src="{% static "front/assets/fourth.mp4" %}" > 
        </video>
        <div class="create-text carousel-caption d-none d-md-block">
          <a href="/bakery/bakery-ingredients/cream-cheese " class="cta">
            <span>Start exploring</span>
            <svg width="13px" height="10px" viewBox="0 0 13 10">
              <path d="M1,5 L11,5"></path>
              <polyline points="8 1 12 5 8 9"></polyline>
            </svg>
          </a>
        </div>       
      </div>
      <div class="carousel-item" data-bs-interval="1111110">
        <video muted  playsinline controls data-name="5">
            <source src="{% static "front/assets/last.mp4" %}" > 
        </video>
        {% comment %} <div  class='embed_video'  style="padding:56.25% 0 0 0;position:relative;"><iframe src="https://player.vimeo.com/video/908592183?badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479&loop=1&display=1&muted=1" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" style="position:absolute;top:0;left:0;width:100%;height:100%;" title="TropoliteCookNWhip"></iframe></div> {% endcomment %}
        <div class="create-text carousel-caption d-none d-md-block">
          <a href="/culinary/cooking-cream/flexi-creme-gold" class="cta">
            <span>Start exploring</span>
            <svg width="13px" height="10px" viewBox="0 0 13 10">
              <path d="M1,5 L11,5"></path>
              <polyline points="8 1 12 5 8 9"></polyline>
            </svg>
          </a>
        </div>
      </div>
    </div>
    <button class=" carousel-control-prev previous_btn" type="button" data-bs-target="#carouselExampleDark" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button class=" carousel-control-next next_btn" type="button" data-bs-target="#carouselExampleDark" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>
</section>
<section class="sec-main-cara">
  <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-indicators">
      <span type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active"
        aria-current="true" aria-label="Slide 1"></span>
      <span type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1"
        aria-label="Slide 2"></span>
      <span type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2"
        aria-label="Slide 3"></span>
    </div>
    <div class="carousel-inner">
      <div class="carousel-item active" data-bs-interval="3000">
        <div class="d-block w-100 sec-cara">
          <h5 class='create-art'>Cook</h5>
          <img loading='lazy' src="{% static 'front/assets/first-slide.webp' %}" height="100%" width="100%" alt="back image of cook delicious art" title="back image of cook delicious art">
          <img loading='lazy' class="append-img" style='transform: scale(1) ;' src="{% static 'front/assets/first-image-home2.webp' %}" alt="cook delicious dishes" title="cook delicious dishes">
        </div>
        <a href="/culinary" class="cta">
          <span>EXPLORE PRODUCTS</span>
          <svg width="13px" height="10px" viewBox="0 0 13 10">
            <path d="M1,5 L11,5"></path>
            <polyline points="8 1 12 5 8 9"></polyline>
          </svg>
        </a>
      </div>
      <div class="carousel-item" data-bs-interval="2000">
        <div class="d-block w-100 sec-cara">
          <h5 class='create-art'>Whip</h5>
          <img loading='lazy' src="{% static 'front/assets/first-slide.webp' %}" height="100%" width="100%" alt="back image of whips" title="back image of whips">
          <img loading='lazy'  style='transform: scale(1) ;'  class="append-img" src="{% static 'front/assets/sec-image-home2.webp' %}" alt="whip dishes" title="whip dishes">
        </div>
        <a href="/dairy" class="cta">
          <span>EXPLORE PRODUCTS</span>
          <svg width="13px" height="10px" viewBox="0 0 13 10">
            <path d="M1,5 L11,5"></path>
            <polyline points="8 1 12 5 8 9"></polyline>
          </svg>
        </a>
      </div>
      <div class="carousel-item">
        <div class="d-block w-100 sec-cara">
          <h5 class='create-art'>Bake</h5>
          <img loading='lazy' src="{% static 'front/assets/first-slide.webp' %}" height="100%" width="100%" alt="baked back images" title="baked back images">        
          <img loading='lazy'  style='transform: scale(1) ;'  class="append-img" src="{% static 'front/assets/platter3.webp' %}" alt="alternate text"  title="alternate text" />
        
        </div>
        <a href="/bakery" class="cta">
          <span>EXPLORE PRODUCTS</span>
          <svg width="13px" height="10px" viewBox="0 0 13 10">
            <path d="M1,5 L11,5"></path>
            <polyline points="8 1 12 5 8 9"></polyline>
          </svg>
        </a>
      </div>
    </div>
    <span class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators"
      data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </span>
    <span class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators"
      data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </span>
  </div>
</section>

{% include "front/include/legacy_numbers.html" %}



<style>
    .innerdetail .h4{margin: 0;
    margin-bottom: 10px;
    color: whit;
    text-transform: uppercase;
    font-family: karin;
    font-style: normal;
}
.inner-detail .h5{
    margin: 0;
    margin-bottom: 10px;
    color: white;
    text-transform: uppercase;
    font-family: karin !important;
    font-style: normal;
    font-size: 1rem !important;
    font-weight: 100;
}
</style>


    {% include "front/include/secret_book.html" %}

{% include "front/include/hotspot_slider_new.html" %}



{% include "front/include/bakery_finder.html" %}



{% include "front/include/customers.html" %}


{% include "front/include/socials.html" %}
{% include "front/include/deals.html" %}




<script>
// Get a reference to all videos within .carousel-item elements
const carouselVideos = document.querySelectorAll('.carousel-item video');

// Keep track of the currently playing video index
let currentVideoIndex = 0;

// Add a click event listener to each mute/unmute button in each .carousel-item
carouselVideos.forEach((video, index) => {
  // Find the mute/unmute button within the current carousel item
  // {% comment %} const muteButton = document.querySelector('.sound'); {% endcomment %}
  const muteButton = video.parentElement.querySelector('.sound');

  // Add click event listener to the found mute/unmute button
  muteButton.addEventListener('click', () => {
    $('.icon svg').toggle()
    // Toggle the mute state for the clicked video
    video.muted = !video.muted;
    // Update the currently playing video index
    currentVideoIndex = index;
  });
});

// Add event listener for the carousel slide event
const carousel = document.getElementById('carouselExampleDark');
carousel.addEventListener('slide.bs.carousel', () => {
  // Mute the previous video when transitioning to the next one
  const previousVideo = carouselVideos[currentVideoIndex];
  if (previousVideo) {
    $('.icon svg:last-child').hide();
    $('.icon svg:first-child').show();
    previousVideo.muted = true;
  }
});



</script>
<script src="{% static 'front/js/insta.js' %}"></script>
<script>
  
  get_thumbnail('908587113');


  


    jQuery.fn.FCInstagram.accessData = {  
     
    accessToken:'IGQWRQYUNfMy1DbGdiZAjZArSE5WcjNKdzVMd0VPOVpMLXZA5SHpVb1lWVjduX1dvakR3U25RbHNZASkNxb3NOblM1NTQyc0xTY3R4ZAnFBa2FTclhGeXlNTnFpbnlYc0YzVENPb1pLNTNmYlZATRVFKcnRYbkJDVFFsVlUZD',
    };
    $('#instafeed').FCInstagram({
      max: 3, // A number between 1 and 25 of photos to show. Default: 9
      autoplay: true, // Set autoplay video: true/false. Default: false
      complete: function () { // A callback function to execute after the display of the photos.
        // console.log('completed');
      }
    });

    $('.embed_video iframe').each(function(){
      var item = $(this)
      item.on('touchstart', function(event) {
        startX = event.originalEvent.touches[0].clientX;        
    });

    item.on('touchmove', function(event) {
      if (!startX) return; // Touch start position not recorded

      const currentX = event.originalEvent.touches[0].clientX;
      const deltaX = currentX - startX;

      if (Math.abs(deltaX) > 10) {
          // Swipe left or right detected
          if (deltaX > 0) {
            console.log('Swipe Right');
            $('.previous_btn').trigger('click');
        } else {
            console.log('Swipe Left');
            $('.next_btn').trigger('click');
        }
        

          // Reset start position to avoid continuous logging
          startX = null;
      }
  });
    })  
    

  


    // Imp.
    const myCarouselElement = document.querySelector('#carouselExampleDark')

const embedVideos = document.querySelectorAll('.carousel-item .embed_video iframe')
    const playerInstances = []

    embedVideos.forEach((iframe, index) => {
        const player = new Vimeo.Player(iframe)
        playerInstances.push(player)
    })

    myCarouselElement.addEventListener('slide.bs.carousel', event => {
        const activeIndex = event.to
        // console.log(activeIndex)
        playerInstances.forEach((player, index) => {
            if (index === activeIndex) {
                player.play()
            } else {
                player.pause()
            }
        })
    })

</script>
<script>
    const top_videos = $('.carousel-item video');
let startXX, startYY;

top_videos.each(function() {
    const item = $(this);

    item.on('mousedown touchstart', function(event) {
        // Store initial touch/mouse position
        startXX = event.clientX || event.originalEvent.touches[0].clientX;
        startYY = event.clientY || event.originalEvent.touches[0].clientY;
    });

    // Attach mouseup/touchend event handler
    item.on('mouseup touchend', function(event) {
        // Calculate swipe distance and direction
        const endX = event.clientX || event.originalEvent.changedTouches[0].clientX;
        const endY = event.clientY || event.originalEvent.changedTouches[0].clientY;
        const deltaX = endX - startXX;
        const deltaY = endY - startYY;

        // Log the direction of the swipe
        if (Math.abs(deltaX) > Math.abs(deltaY)) {
            if (deltaX > 0) {

                const currentIndex = top_videos.index(this);
                const nextIndex = (currentIndex - 1) % top_videos.length;                 
                const numbee  =    top_videos.eq(nextIndex).attr('data-name')   
                const videoToPlay = top_videos.filter(`[data-name="${numbee}"]`);
                top_videos.each(function(index, video) {
                    if (video !== item[0]) {                        
                        video.pause(); 
                    }
                });
                if (videoToPlay.length > 0) {                    
                    videoToPlay[0].play(); 
                } else {
                    console.log(`video not found`);
                }
            } else {
                const currentIndex = top_videos.index(this);
                const nextIndex = (currentIndex + 1) % top_videos.length;           
                const numbee  =    top_videos.eq(nextIndex).attr('data-name')                       
                const videoToPlay = top_videos.filter(`[data-name="${numbee}"]`);
                top_videos.each(function(index, video) {
                    if (video !== item[0]) {                        
                        video.pause(); 
                    }
                });
                if (videoToPlay.length > 0) {                            
                    videoToPlay[0].play(); 
                } else {
                    console.log(`video not found`);
                }
            }
        }
    });
});


$('#carouselExampleDark .carousel-indicators span').each(function(){
    const item = $(this)
    item.click(function(){        
        const number_of_slide = parseInt(item.attr('data-bs-slide-to'))
        const gettingvide =  (number_of_slide + 1)
        const videoToPlay = top_videos.filter(`[data-name="${gettingvide}"]`);        
            top_videos.each(function(){
                const item = $(this)
                item[0].pause()
                if(videoToPlay.length > 0 ){
                    videoToPlay[0].play(); 
                }  
            })
    })
})
</script>
{% endblock %}